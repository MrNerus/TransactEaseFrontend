<div class="organization-list-container">
  <h2>Organizations</h2>

  <div class="controls">
    <input type="text" placeholder="Search..." [(ngModel)]="searchTerm" (input)="onSearchChange()">
    <select [(ngModel)]="searchField" (change)="onSearchFieldChange()">
      <option value="all">All Fields</option>
      <option value="id">ID</option>
      <option value="name">Name</option>
      <option value="parentId">Parent ID</option>
    </select>
    <button (click)="addOrganization()" title="Add New Organization"><span class="material-icons">add</span></button>
  </div>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Parent ID</th>
        <th>Created At</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (org of organizations(); track org.id) {
        <tr>
          <td>{{ org.id }}</td>
          <td>{{ org.name }}</td>
          <td>{{ org.parentId || 'N/A' }}</td>
          <td>{{ org.createdAt | date:'short' }}</td>
          <td>
            <button (click)="editOrganization(org)" title="Edit"><span class="material-icons">edit</span></button>
            <button (click)="deleteOrganization(org.id)" title="Delete"><span class="material-icons">delete</span></button>
          </td>
        </tr>
      }
      @empty {
        <tr>
          <td colspan="5">No organizations found.</td>
        </tr>
      }
    </tbody>
  </table>

  <div class="pagination">
    <select [(ngModel)]="pageSize" (change)="onPageSizeChange()">
      @for (option of pageSizeOptions; track option) {
        <option [value]="option">{{ option }} rows</option>
      }
    </select>
    <button (click)="firstPage()" [disabled]="currentPage() === 1" title="First Page"><span class="material-icons">first_page</span></button>
    <button (click)="previousPage()" [disabled]="currentPage() === 1" title="Previous Page"><span class="material-icons">chevron_left</span></button>
    <span>Page
      <input type="number" [(ngModel)]="pageInput" (change)="goToPage()" min="1" [max]="totalPages()">
      of {{ totalPages() }}
    </span>
    <button (click)="nextPage()" [disabled]="currentPage() === totalPages()" title="Next Page"><span class="material-icons">chevron_right</span></button>
    <button (click)="lastPage()" [disabled]="currentPage() === totalPages()" title="Last Page"><span class="material-icons">last_page</span></button>
  </div>
</div>